function e(e,t,i,s){Object.defineProperty(e,t,{get:i,set:s,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}function i(e){return e.location.position}function s(e){return e.location.file}function n(e){var t;return ze.relativizePath(null!==(t=s(e))&&void 0!==t?t:"")[1]}function r(e,t,i=null){const n=[];return e.forEach((e=>{e&&e.location&&(t&&s(e)!==t||i&&e.severity!==i||n.push(e))})),n}function o(e,t,n){const r=[],o="Point"===n.constructor.name?new Ne(n,n):Ne.fromObject(n);return e.forEach((e=>{const n=s(e),l=i(e);"string"==typeof n&&l&&n===t&&"function"==typeof l.intersectsWith&&l.intersectsWith(o)&&r.push(e)})),r}async function l(e,t){const i={searchAllPanes:!0};t&&(i.initialLine=t.row,i.initialColumn=t.column),await We.open(e,i)}async function a(e,t=!1){let n,r;if(t){if(!e.reference||!e.reference.file)return void console.warn("[Linter-UI-Default] Message does not have a valid reference. Ignoring");n=e.reference.file,r=e.reference.position}else{const t=i(e);n=s(e),t&&(r=t.start)}"string"==typeof n&&await l(n,r)}function c(e){2===e.version&&void 0!==e.url&&Ie.openExternal(e.url)}function u(e,t){const s=t[0],r="asc"===t[1]?1:-1;return e.sort(((e,t)=>{if("severity"===s){const i=Ge[e.severity],s=Ge[t.severity];if(i!==s)return r*(i>s?1:-1)}if("linterName"===s){const i=e.severity.localeCompare(t.severity);if(0!==i)return r*i}if("file"===s){const i=n(e),s=i.length,o=n(t),l=o.length;if(s!==l)return r*(s>l?1:-1);if(i!==o)return r*i.localeCompare(o)}if("line"===s){const s=i(e),n=i(t);if(s&&!n)return 1;if(n&&!s)return-1;if(s&&n){if(s.start.row!==n.start.row)return r*(s.start.row>n.start.row?1:-1);if(s.start.column!==n.start.column)return r*(s.start.column>n.start.column?1:-1)}}return 0}))}function d(e){return e.sort(((e,t)=>void 0===e.priority||void 0===t.priority?0:t.priority-e.priority))}function h(e,t){if("apply"in t)return t.apply(),!0;const i=t.position,s=t.replaceWith;if("currentText"in t){const s=t.currentText,n=e.getTextInBufferRange(i);if(s!==n)return console.warn("[linter-ui-default] Not applying fix because text did not match the expected one","expected",s,"but got",n),!1}return e.setTextInBufferRange(i,s),!0}function f(e,t,i){const s=e.get(t);if(void 0!==s)return s;{const s=i();return null!==s&&e.set(t,s),s}}function p(e,t){let i;return(...s)=>{void 0!==i&&clearTimeout(i),i=setTimeout((()=>{e(...s)}),t)}}function g(e){Qe.context=e}function m(e,t){t&&(rt=t);const i=ot,s=rt,n=0===e.length?it:{owned:null,cleanups:null,context:null,owner:s,attached:!!t};let r;rt=n,ot=null;try{A((()=>r=e((()=>F(n)))),!0)}finally{ot=i,rt=s}return r}function v(e,t=!0,i){const s={value:e,observers:null,observerSlots:null,pending:tt,comparator:t?"function"==typeof t?t:Xe:void 0};return[C.bind(s),E.bind(s)]}function w(e,t){S(T(e,t,!1))}function y(e,t){et=B;const i=T(e,t,!1);i.user=!0,ct&&ct.push(i)}function b(e,t,i=!0){const s=T(e,t,!0);return s.pending=tt,s.observers=null,s.observerSlots=null,s.state=0,s.comparator=i?"function"==typeof i?i:Xe:void 0,S(s),C.bind(s)}function k(e){if(lt)return e();const t=lt=[],i=e();return lt=null,A((()=>{for(let e=0;t.length>e;e+=1){const i=t[e];if(i.pending!==tt){const e=i.pending;i.pending=tt,E.call(i,e)}}}),!1),i}function P(e){let t,i=ot;return ot=null,t=e(),ot=i,t}function x(e){y((()=>P(e)))}function C(){if(this.state&&this.sources){const e=at;at=null,1===this.state?S(this):D(this),at=e}if(ot){const e=this.observers?this.observers.length:0;ot.sources?(ot.sources.push(this),ot.sourceSlots.push(e)):(ot.sources=[this],ot.sourceSlots=[e]),this.observers?(this.observers.push(ot),this.observerSlots.push(ot.sources.length-1)):(this.observers=[ot],this.observerSlots=[ot.sources.length-1])}return ut&&ut.running&&ut.sources.has(this)?this.tValue:this.value}function E(e,t){if(this.comparator)if(ut&&ut.running&&ut.sources.has(this)){if(this.comparator(this.tValue,e))return e}else if(this.comparator(this.value,e))return e;return lt?(this.pending===tt&&lt.push(this),this.pending=e,e):(ut?((ut.running||!t&&ut.sources.has(this))&&(ut.sources.add(this),this.tValue=e),ut.running||(this.value=e)):this.value=e,!this.observers||at&&!this.observers.length||A((()=>{for(let e=0;this.observers.length>e;e+=1){const t=this.observers[e];ut&&ut.running&&ut.disposed.has(t)||(t.observers&&2!==t.state&&I(t),t.state=1,t.pure?at.push(t):ct.push(t))}if(at.length>1e6)throw at=[],Error("Potential Infinite Loop Detected.")}),!1),e)}function S(e){if(!e.fn)return;F(e);const t=rt,i=ot,s=dt;ot=rt=e,L(e,e.value,s),ut&&!ut.running&&ut.sources.has(e)&&(ut.running=!0,L(e,e.tValue,s),ut.running=!1),ot=i,rt=t}function L(e,t,i){let s;try{s=e.fn(t)}catch(e){O(e)}e.updatedAt&&e.updatedAt>i||(e.observers&&e.observers.length?E.call(e,s,!0):ut&&ut.running&&e.pure?(ut.sources.add(e),e.tValue=s):e.value=s,e.updatedAt=i)}function T(e,t,i){const s={fn:e,state:1,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:rt,context:null,pure:i};return null===rt||rt!==it&&(ut&&ut.running&&rt.pure?rt.tOwned?rt.tOwned.push(s):rt.tOwned=[s]:rt.owned?rt.owned.push(s):rt.owned=[s]),s}function M(e){let t,i=1===e.state&&e;if(e.suspense&&P(e.suspense.inFallback))return e.suspense.effects.push(e);const s=ut&&ut.running;for(;(e.fn||s&&e.attached)&&(e=e.owner);){if(s&&ut.disposed.has(e))return;2===e.state?t=e:1===e.state&&(i=e,t=void 0)}if(t){const n=at;if(at=null,D(t),at=n,!i||1!==i.state)return;if(s)for(e=i;(e.fn||e.attached)&&(e=e.owner);)if(ut.disposed.has(e))return}i&&S(i)}function A(e,t){if(at)return e();let i=!1;t||(at=[]),ct?i=!0:ct=[],dt++;try{e()}catch(e){O(e)}finally{(e=>{if(at&&(N(at),at=null),e)return;let t;if(ut&&ut.running){if(ut.promises.size)return ut.running=!1,ut.effects.push.apply(ut.effects,ct),ct=null,void nt(!0);const e=ut.sources;t=ut.cb,ut=null,k((()=>{e.forEach((e=>{if(e.value=e.tValue,e.owned)for(let t=0,i=e.owned.length;i>t;t++)F(e.owned[t]);e.tOwned&&(e.owned=e.tOwned),delete e.tValue,delete e.tOwned})),nt(!1)}))}ct.length?k((()=>{et(ct),ct=null})):ct=null,t&&t.forEach((e=>e()))})(i)}}function N(e){for(let t=0;e.length>t;t++)M(e[t])}function B(e){let t,i=0;for(t=0;e.length>t;t++){const s=e[t];s.user?e[i++]=s:M(s)}const s=e.length;for(t=0;i>t;t++)M(e[t]);for(t=s;e.length>t;t++)M(e[t])}function D(e){e.state=0;for(let t=0;e.sources.length>t;t+=1){const i=e.sources[t];i.sources&&(1===i.state?M(i):2===i.state&&D(i))}}function I(e){for(let t=0;e.observers.length>t;t+=1){const i=e.observers[t];i.state||(i.state=2,i.observers&&I(i))}}function F(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),s=t.observers;if(s&&s.length){const e=s.pop(),n=t.observerSlots.pop();s.length>i&&(e.sourceSlots[n]=i,s[i]=e,t.observerSlots[i]=n)}}if(ut&&ut.running&&e.pure){if(e.tOwned){for(t=0;e.tOwned.length>t;t++)F(e.tOwned[t]);delete e.tOwned}R(e,!0)}else if(e.owned){for(t=0;e.owned.length>t;t++)F(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;e.cleanups.length>t;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function R(e,t){if(t||(e.state=0,ut.disposed.add(e)),e.owned)for(let t=0;e.owned.length>t;t++)R(e.owned[t])}function O(e){const t=Ze&&$(rt,Ze);if(!t)throw e;t.forEach((t=>t(e)))}function $(e,t){return e&&(e.context&&e.context[t]||e.owner&&$(e.owner,t))}function H(e,t){if(Qe.context){const i=Qe.context;g({...Qe.context,id:`${Qe.context.id}${Qe.context.count++}.`,count:0});const s=P((()=>e(t)));return g(i),s}return P((()=>e(t)))}function j(e){return b(((e,t,i={})=>{let s=[],n=[],r=[],o=0,l=t.length>1?[]:null,a=rt;return c=()=>{for(let e=0,t=r.length;t>e;e++)r[e]()},null===rt||(null===rt.cleanups?rt.cleanups=[c]:rt.cleanups.push(c)),()=>{function c(e){if(r[d]=e,l){const[e,i]=v(d);return l[d]=i,t(h[d],e)}return t(h[d])}let u,d,h=e()||[];return P((()=>{let e,t,f,p,g,v,w,y,b,k=h.length;if(0===k){if(0!==o){for(u=0;o>u;u++)r[u]();r=[],s=[],n=[],o=0,l&&(l=[])}i.fallback&&(s=[ht],n[0]=m((e=>(r[0]=e,i.fallback())),a),o=1)}else if(0===o){for(d=0;k>d;d++)s[d]=h[d],n[d]=m(c,a);o=k}else{for(f=Array(k),p=Array(k),l&&(g=Array(k)),v=0,w=Math.min(o,k);w>v&&s[v]===h[v];v++);for(w=o-1,y=k-1;w>=v&&y>=v&&s[w]===h[y];w--,y--)f[y]=n[w],p[y]=r[w],l&&(g[y]=l[w]);for(e=new Map,t=Array(y+1),d=y;d>=v;d--)b=h[d],u=e.get(b),t[d]=void 0===u?-1:u,e.set(b,d);for(u=v;w>=u;u++)b=s[u],d=e.get(b),void 0!==d&&-1!==d?(f[d]=n[u],p[d]=r[u],l&&(g[d]=l[u]),d=t[d],e.set(b,d)):r[u]();for(d=v;k>d;d++)d in f?(n[d]=f[d],r[d]=p[d],l&&(l[d]=g[d],l[d](d))):n[d]=m(c,a);o=n.length=k,s=h.slice(0)}return n}))};var c})((()=>e.each),e.children,"fallback"in e&&{fallback(){return e.fallback}}||void 0),void 0,!1)}function q(e){let t=!1;const i=b((()=>e.when),void 0,((e,i)=>t?e===i:!e==!i));return b((()=>{const s=i();if(s){const i=e.children;return(t="function"==typeof i&&i.length>0)?P((()=>i(s))):i}return e.fallback}))}function V(e,t,i){let s=i.length,n=t.length,r=s,o=0,l=0,a=t[n-1].nextSibling,c=null;for(;n>o||r>l;)if(n===o){const t=s>r?l?i[l-1].nextSibling:i[r-l]:a;for(;r>l;)e.insertBefore(i[l++],t)}else if(r===l)for(;n>o;)c&&c.has(t[o])||e.removeChild(t[o]),o++;else if(t[o]===i[l])o++,l++;else if(t[n-1]===i[r-1])n--,r--;else if(t[o]===i[r-1]&&i[l]===t[n-1]){const s=t[--n].nextSibling;e.insertBefore(i[l++],t[o++].nextSibling),e.insertBefore(i[--r],s),t[n]=i[r]}else{if(!c){c=new Map;let e=l;for(;r>e;)c.set(i[e],e++)}const s=c.get(t[o]);if(null!=s)if(s>l&&r>s){let a,u=o,d=1;for(;++u<n&&r>u&&null!=(a=c.get(t[u]))&&a===s+d;)d++;if(d>s-l){const n=t[o];for(;s>l;)e.insertBefore(i[l++],n)}else e.replaceChild(i[l++],t[o++])}else o++;else e.removeChild(t[o++])}}function W(e,t,i){let s;return m((n=>{s=n,U(t,e(),t.firstChild?null:void 0,i)})),()=>{s(),t.textContent=""}}function z(e,t,i){const s=document.createElement("template");if(s.innerHTML=e,t&&s.innerHTML.split("<").length-1!==t)throw`Template html does not match input:\n${s.innerHTML}\n\n${e}`;let n=s.content.firstChild;return i&&(n=n.firstChild),n}function G(e){const t=document[ft]||(document[ft]=new Set);for(let i=0,s=e.length;s>i;i++){const s=e[i];t.has(s)||(t.add(s),document.addEventListener(s,Y))}}function _(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function K(e,t,i,s){s?Array.isArray(i)?(e["$$"+t]=i[0],e[`$$${t}Data`]=i[1]):e["$$"+t]=i:e.addEventListener(t,Array.isArray(i)?e=>i[0](i[1],e):i)}function U(e,t,i,s){if(void 0===i||s||(s=[]),"function"!=typeof t)return J(e,t,s,i);w((s=>J(e,t(),s,i)),s)}function Y(e){const t="$$"+e.type;let i=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==i&&Object.defineProperty(e,"target",{configurable:!0,value:i}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>i});null!==i;){const s=i[t];if(s){const n=i[t+"Data"];if(void 0!==n?s(n,e):s(e),e.cancelBubble)return}i=i.host&&i.host!==i&&i.host instanceof Node?i.host:i.parentNode}}function J(e,t,i,s,n){for(;"function"==typeof i;)i=i();if(t===i)return i;const r=typeof t,o=void 0!==s;if(e=o&&i[0]&&i[0].parentNode||e,"string"===r||"number"===r)if("number"===r&&(t=""+t),o){let n=i[0];n&&3===n.nodeType?n.data=t:n=document.createTextNode(t),i=Z(e,i,s,n)}else i=""!==i&&"string"==typeof i?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===r){if(Qe.context)return i;i=Z(e,i,s)}else{if("function"===r)return w((()=>{let n=t();for(;"function"==typeof n;)n=n();i=J(e,n,i,s)})),()=>i;if(Array.isArray(t)){const r=[];if(Q(r,t,n))return w((()=>i=J(e,r,i,s,!0))),()=>i;if(Qe.context&&i.length)return i;if(0===r.length){if(i=Z(e,i,s),o)return i}else Array.isArray(i)?0===i.length?X(e,r,s):V(e,i,r):null==i||""===i?X(e,r):V(e,o&&i||[e.firstChild],r);i=r}else if(t instanceof Node){if(Array.isArray(i)){if(o)return i=Z(e,i,s,t);Z(e,i,null,t)}else null!=i&&""!==i&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);i=t}else console.warn("Skipped inserting",t)}return i}function Q(e,t,i){let s=!1;for(let n=0,r=t.length;r>n;n++){let r,o=t[n];if(o instanceof Node)e.push(o);else if(null==o||!0===o||!1===o);else if(Array.isArray(o))s=Q(e,o)||s;else if("string"==(r=typeof o))e.push(document.createTextNode(o));else if("function"===r)if(i){for(;"function"==typeof o;)o=o();s=Q(e,Array.isArray(o)?o:[o])||s}else e.push(o),s=!0;else e.push(document.createTextNode(""+o))}return s}function X(e,t,i){for(let s=0,n=t.length;n>s;s++)e.insertBefore(t[s],i)}function Z(e,t,i,s){if(void 0===i)return e.textContent="";const n=s||document.createTextNode("");if(t.length){let s=!1;for(let r=t.length-1;r>=0;r--){const o=t[r];if(n!==o){const t=o.parentNode===e;s||r?t&&e.removeChild(o):t?e.replaceChild(n,o):e.insertBefore(n,i)}else s=!0}}else e.insertBefore(n,i);return[n]}function ee(e){function t(){const t=n();return void 0!==t?t:void 0!==e.defaultSortDirection?e.defaultSortDirection:[null,null]}function i(){const i=t();null===i[0]&&void 0!==e.defaultSortDirection?l(a(o(),e.defaultSortDirection)):null!==i[0]&&l(a(o(),i))}var s;const[n,r]=v(),[o,l]=v(e.rows,!1);S(T((()=>{l(e.rows)}),undefined,!0));const a=null!==(s=e.rowSorter)&&void 0!==s?s:re,{headerRenderer:c=ie,bodyRenderer:u=se,getRowID:d=ne,accessors:h}=e;return void 0===e.columns&&(e.columns=((e,t=0)=>{const i=Object.keys(e[t]),s=i.length,n=Array(s);for(let e=0;s>e;e++)n[e]={id:i[e]};return n})(e.rows,e.representitiveRowNumber)),i(),(()=>{const s=pt.cloneNode(!0),n=s.firstChild,l=n.nextSibling;return U(n.firstChild,H(j,{get each(){return e.columns},children(e){const s=!1!==e.sortable;return(()=>{const n=gt.cloneNode(!0);var o;return K(n,"click",s?(o=e.id,e=>{r(((e,t,i)=>{let s;return s=i?[null,null]:e[0]===t?[e[0],"asc"===e[1]?"desc":"asc"]:[t,"asc"],s})(t(),o,e.shiftKey)),i()}):void 0,!0),n.className=s?"sortable":void 0,U(n,(()=>c(e)),null),U(n,(()=>s?((e,t)=>{let i;return i=null===e[0]||e[0]!==t?kt:"asc"===e[1]?bt:yt,(()=>{const e=wt.cloneNode(!0);return U(e,i),e})()})(t(),e.id):void 0),null),w((()=>_(n,"id",h?e.id+"":void 0))),n})()}})),U(l,H(j,{get each(){return o()},children(t){const i=h?d(t):void 0;return(()=>{const s=mt.cloneNode(!0);return _(s,"id",i),U(s,H(j,{get each(){return e.columns},children(e){return(()=>{const s=vt.cloneNode(!0);return K(s,"click",void 0!==e.onClick?i=>e.onClick(i,t):void 0,!0),U(s,(()=>u(t,e.id))),w((()=>_(s,"id",i?`${i}.${e.id}`:void 0))),s})()}})),s})()}})),w((t=>{var i;const n="solid-simple-table "+(null!==(i=e.className)&&void 0!==i?i:""),r=e.style;return n!==t._v$&&(s.className=t._v$=n),t._v$2=((e,t,i={})=>{const s=e.style;if("string"==typeof t)return s.cssText=t;let n,r;for(r in"string"==typeof i&&(i={}),i)null==t[r]&&s.removeProperty(r),delete i[r];for(r in t)n=t[r],n!==i[r]&&(s.setProperty(r,n),i[r]=n);return i})(s,r,t._v$2),t}),{_v$:void 0,_v$2:void 0}),s})()}function te(e){return"string"==typeof e?e:JSON.stringify(e)}function ie(e){var t;return null!==(t=e.label)&&void 0!==t?t:e.id}function se(e,t){return te("object"==typeof e?e[t]:e)}function ne(e){return te(e)}function re(e,t){if(!e.length)return e;let i;const s=t[0];return i="object"==typeof e[0]?e.sort(((e,t)=>{const i=e[s],n=t[s];return i===n?0:n>i?-1:1})):e.sort(),"desc"===t[1]?i.reverse():i}function oe(e){const[t,i]=v(e.delegate.filteredMessages,!1);x((()=>{e.delegate.onDidChangeMessages((e=>{i(e)}))}));const s=[{id:"severity",label:"Severity"},{id:"linterName",label:"Provider"},{id:"excerpt",label:"Description",onClick:ae,sortable:!1},{id:"line",label:"Line",onClick:ae}];return"Entire Project"===e.delegate.panelRepresents&&s.push({id:"file",label:"File",onClick:ae}),(()=>{const e=Pt.cloneNode(!0);return _(e,"tabindex",-1),e.style.setProperty("overflowY","scroll"),e.style.setProperty("height","100%"),U(e,H(ee,{get rows(){return t()},columns:s,defaultSortDirection:["severity","asc"],rowSorter:u,accessors:!0,getRowID(e){return e.key},bodyRenderer:le,style:{width:"100%"},className:"linter dark"})),e})()}function le(e,t){const s=i(e);switch(t){case"file":return n(e);case"line":return s?`${s.start.row+1}:${s.start.column+1}`:"";case"excerpt":return e.excerpt;case"severity":return(()=>{const t=xt.cloneNode(!0);return U(t,(()=>_e[e.severity])),w((()=>t.className="solid-simple-table linter "+e.severity)),t})();default:return e[t]}}async function ae(e,t){"A"!==e.target.tagName&&(("darwin"===process.platform?e.metaKey:e.ctrlKey)?e.shiftKey?c(t):await a(t,!0):await a(t))}function ce(e){const t=Et.paneContainerForItem(e);return t&&"object"==typeof t.state&&"number"==typeof t.state.size&&"function"==typeof t.render?t:null}function ue(e){const t=document.createElement("a");return t.classList.add("icon-"+e),t.appendChild(document.createTextNode("")),t}function de(e){const[t,i]=v("Loading ..."),[s,n]=v(!1);y((async()=>{if(s()){const t=e.message.description;if(console.log(t),"string"==typeof t)i(await(async e=>(void 0===ri&&(ri=(await Ve("lWcAc")).default),ri(e)))(t));else if("function"==typeof t){const e=await t();if("string"!=typeof e)throw Error("Expected result to be string, got: "+typeof e);i(e)}else console.error("[Linter] Invalid description detected, expected string or function but got:",typeof t)}})),x((()=>{e.delegate.onShouldUpdate((()=>{n(!1),i("Loading ...")})),e.delegate.onShouldExpand((()=>{n(!0)})),e.delegate.onShouldCollapse((()=>{n(!1)}))}));const{message:r,delegate:o}=e;return(()=>{const e=si.cloneNode(!0),i=e.firstChild,l=i.firstChild,u=l.firstChild,f=l.nextSibling;return e.$$click=he,U(i,H(q,{get when(){return void 0!==r.description},get children(){const e=Xt.cloneNode(!0),t=e.firstChild;return e.$$click=()=>n(!s()),w((()=>t.className="icon linter-icon icon-"+(s()?"chevron-down":"chevron-right"))),e}}),l),U(i,H(q,{get when(){return(e=>{const t=e.solutions;return!(!Array.isArray(t)||0>=t.length)})(r)},get children(){const e=Zt.cloneNode(!0);return K(e,"click",(e=>{let t,i=!1;return(...e)=>(i||(t=(()=>(e=>{const t=e.solutions,i=ni.getActiveTextEditor();void 0!==i&&Array.isArray(t)&&t.length>0&&h(i,d(t)[0])})(r))(...e),i=!0),t)})(),!0),e}}),l),U(u,H(q,{get when(){return!0===o.showProviderName},get children(){return r.linterName+": "}})),U(l,(()=>r.excerpt),null),U(f,H(q,{get when(){var e;return void 0!==(null===(e=r.reference)||void 0===e?void 0:e.file)},get children(){const e=ei.cloneNode(!0);return K(e,"click",p((()=>a(r,!0))),!0),e}}),null),U(f,H(q,{get when(){return void 0!==r.url},get children(){const e=ti.cloneNode(!0);return K(e,"click",p((()=>c(r))),!0),e}}),null),U(e,H(q,{get when(){return s()},get children(){const e=ii.cloneNode(!0);return w((()=>e.innerHTML=t())),e}}),null),w((()=>i.className="linter-excerpt "+r.severity)),e})()}async function he(e){if(!(e.target instanceof HTMLElement))return;const t=(e=>{let t=e;for(;null!==t&&!t.classList.contains("linter-line");){if(t instanceof HTMLAnchorElement)return t.href;t=t.parentElement}return null})(e.target);if(null===t)return;const{protocol:i,hostname:s,query:n}=Oe(t,!0);if("atom:"===i&&"linter"===s&&void 0!==(null==n?void 0:n.file)){const{file:e,row:t,column:i}=n;await l(Array.isArray(e)?e[0]:e,{row:void 0!==t?parseInt(Array.isArray(t)?t[0]:t,10):0,column:void 0!==i?parseInt(Array.isArray(i)?i[0]:i,10):0})}}function fe(e,t){const i=atom.views.getView(e).getComponent();t.addEventListener("mousedown",(()=>{ge(i),t.addEventListener("mouseleave",(()=>{pe(i)}))}))}function pe(e){null==e||e.didFocus()}function ge(e){null==e||e.didBlurHiddenInput({relatedTarget:null})}async function me(e){if(e.preventDefault(),e.ctrlKey&&"c"===e.key){var t,i;const e=null!==(t=null===(i=document.getSelection())||void 0===i?void 0:""+i)&&void 0!==t?t:"";await navigator.clipboard.writeText(e)}}function ve(e){return(()=>{const t=li.cloneNode(!0);return U(t,H(j,{get each(){return e.messages},children(t){return H(q,{get when(){return 2===t.version},get children(){return H(de,{get key(){return t.key},get delegate(){return e.delegate},message:t})}})}})),t})()}function we(e,t){if(e.largeFileMode)return 1e5;const i=e.getLineCount();return t>i?0:i}function ye(e,t,i=e.getLineCount()){const s=e.getBuffer();for(let e=0,n=i;n>e;e++){const i=s.lineLengthForRow(e);if(i>t)return i}return 0}function be(e,t,i=!1){let s=null;i&&(s=e.querySelector("linter-decoration")),null!==s?s.className="":(s=document.createElement("linter-decoration"),e.appendChild(s)),t.error?s.classList.add("linter-error"):t.warning?s.classList.add("linter-warning"):t.info&&s.classList.add("linter-info")}function ke(e){var t;null===(t=e.querySelector("linter-decoration"))||void 0===t||t.remove()}function Pe(){Pi.get("linter-ui-default.useBusySignal")&&xi.getLoadedPackage("linter-ui-default").metadata["package-deps"].push("busy-signal");const e=window.requestIdleCallback((async()=>{Ci.delete(e),await(async()=>{atom.packages.isPackageLoaded("linter")&&atom.packages.isPackageLoaded("intentions")||(await(await Te).install("linter-ui-default",!0),atom.notifications.addInfo('Enabling package linter and intentions that are needed for "linter-ui-default"'),atom.packages.enablePackage("linter"),atom.packages.enablePackage("intentions"))})()}));Ci.add(e)}function xe(){Ci.forEach((e=>window.cancelIdleCallback(e))),Ci.clear();for(const e of Ei)e.dispose();Ei.clear()}function Ce(){const e=new ki;return Ei.add(e),Si&&e.signal.attach(Si),e}function Ee(){return Array.from(Ei).map((e=>e.intentions))}function Se(e){Si=e,Ei.forEach((e=>{e.signal.attach(Si)}))}function Le(e){Li=e,Ei.forEach((e=>{e.statusBar.attach(Li)}))}var Te=require("atom-package-deps"),Me=require("atom"),Ae=Me.CompositeDisposable,Ne=Me.Range,Be=Me.Emitter,De=Me.Disposable,Ie=require("electron").shell,Fe=t(require("assert")),Re=t(require("disposable-event")),Oe=require("url").parse,$e=t(require("path")),He="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},je={},qe={},Ve=He.parcelRequiree95c;null==Ve&&((Ve=e=>{if(e in je)return je[e].exports;if(e in qe){let t=qe[e];delete qe[e];let i={id:e,exports:{}};return je[e]=i,t.call(i.exports,i,i.exports),i.exports}var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}).register=(e,t)=>{qe[e]=t},He.parcelRequiree95c=Ve),e(module.exports,"activate",(()=>Pe)),e(module.exports,"consumeSignal",(()=>Se)),e(module.exports,"consumeStatusBar",(()=>Le)),e(module.exports,"provideIntentions",(()=>Ee)),e(module.exports,"deactivate",(()=>xe)),e(module.exports,"provideUI",(()=>Ce));const{workspace:We,project:ze}=atom,Ge={error:3,warning:2,info:1},_e={error:"Error",warning:"Warning",info:"Info"},Ke=["center","bottom"],{config:Ue,workspace:Ye}=atom;class Je{constructor(){this.emitter=new Be,this.messages=[],this.filteredMessages=[],this.subscriptions=new Ae;let e=null;this.subscriptions.add(Ue.observe("linter-ui-default.panelRepresents",(e=>{const t=void 0!==this.panelRepresents;this.panelRepresents=e,t&&this.update()})),Ye.getCenter().observeActivePaneItem((()=>{e&&(e.dispose(),e=null);const t=Ye.getActiveTextEditor();if(void 0!==t){"Entire Project"!==this.panelRepresents&&this.update();let i=-1;e=t.onDidChangeCursorPosition((({newBufferPosition:e})=>{i!==e.row&&"Current Line"===this.panelRepresents&&(i=e.row,this.update())}))}"Entire Project"===this.panelRepresents&&void 0===t||this.update()})),new De((()=>{null==e||e.dispose()})))}getFilteredMessages(){let e=[];if("Entire Project"===this.panelRepresents)e=this.messages;else if("Current File"===this.panelRepresents){const t=Ye.getActiveTextEditor();if(!t)return[];e=r(this.messages,t.getPath())}else if("Current Line"===this.panelRepresents){const t=Ye.getActiveTextEditor();if(!t)return[];const i=t.getCursors()[0].getBufferRow();e=o(this.messages,t.getPath(),Ne.fromObject([[i,0],[i,1/0]]))}return e}update(e=null){Array.isArray(e)&&(this.messages=e),this.filteredMessages=this.getFilteredMessages(),this.emitter.emit("observe-messages",this.filteredMessages)}onDidChangeMessages(e){return this.emitter.on("observe-messages",e)}dispose(){this.subscriptions.dispose()}}const Qe={},Xe=(e,t)=>e===t;let Ze=null,et=N;const tt={},it={owned:null,cleanups:null,context:null,owner:null},[st,nt]=v(!1);var rt=null,ot=null;let lt=null,at=null,ct=null,ut=null,dt=0;Symbol(),Symbol(),Symbol(),Symbol();const ht=Symbol();(e=>{Symbol()})(),new Set(["className","indeterminate","value","allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","truespeed"]),new Set(["innerHTML","textContent","innerText","children"]),new Set(["beforeinput","click","dblclick","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]);const ft=Symbol(),pt=z("<table><thead><tr></tr></thead><tbody></tbody></table>",8),gt=z("<th></th>",2),mt=z("<tr></tr>",2),vt=z("<td></td>",2),wt=z('<span class="sort-icon"></span>',2),yt="↑",bt="↓",kt="⇅";G(["click"]);const Pt=z('<div id="linter-panel"></div>',2),xt=z("<div></div>",2),{config:Ct,workspace:Et,views:St}=atom;class Lt{constructor(e){this.element=document.createElement("div"),this.subscriptions=new Ae,this.panelHeight=100,this.alwaysTakeMinimumSpace=!0,this.subscriptions.add(Ct.observe("linter-ui-default.panelHeight",(e=>{const t="number"==typeof this.panelHeight;this.panelHeight=e,t&&this.doPanelResize(!0)})),Ct.observe("linter-ui-default.alwaysTakeMinimumSpace",(e=>{this.alwaysTakeMinimumSpace=e}))),this.doPanelResize(),W((()=>H(oe,{delegate:e})),this.element)}doPanelResize(e=!1){const t=ce(this);if(null===t)return;let i=null;const s=St.getView(t);if(s&&this.alwaysTakeMinimumSpace){const e=s.querySelector(".list-inline.tab-bar.inset-panel"),t=e?e.getClientRects()[0]:null,n=this.element.querySelector("table"),r=n?n.getClientRects()[0]:null;t&&r&&(i=t.height+r.height+1)}let n=null;const r=null===i||e?this.panelHeight:Math.min(i,this.panelHeight);void 0===this.lastSetPaneHeight||t.state.size===this.lastSetPaneHeight||e||(n=t.state.size),this.lastSetPaneHeight=r,t.state.size=r,t.render(t.state),null!==n&&Ct.set("linter-ui-default.panelHeight",n)}getURI(){return"atom://linter-ui-default"}getTitle(){return"Linter"}getDefaultLocation(){return"bottom"}getAllowedLocations(){return Ke}getPreferredHeight(){return Ct.get("linter-ui-default.panelHeight")}dispose(){this.subscriptions.dispose();const e=ce(this);var t;null===e||this.alwaysTakeMinimumSpace||e.state.size===this.panelHeight||(Ct.set("linter-ui-default.panelHeight",e.state.size),null===(t=e.paneForItem(this))||void 0===t||t.destroyItem(this,!0))}}const{config:Tt,workspace:Mt}=atom;class At{constructor(){this.panel=null,this.element=document.createElement("div"),this.delegate=new Je,this.messages=[],this.deactivating=!1,this.subscriptions=new Ae,this.showPanelConfig=!0,this.hidePanelWhenEmpty=!0,this.showPanelStateMessages=!1,this.initialized=!1,this.subscriptions.add(this.delegate,Tt.observe("linter-ui-default.hidePanelWhenEmpty",(async e=>{this.hidePanelWhenEmpty=e,await this.refresh()})),Mt.onDidDestroyPane((({pane:e})=>{(null===this.panel||e.getItems().includes(this.panel))&&!this.deactivating&&(this.panel=null,Tt.set("linter-ui-default.showPanel",!1))})),Mt.onDidDestroyPaneItem((({item:e})=>{e instanceof Lt&&!this.deactivating&&(this.panel=null,Tt.set("linter-ui-default.showPanel",!1))})),Tt.observe("linter-ui-default.showPanel",(async e=>{this.showPanelConfig=e,await this.refresh()})),Mt.getCenter().observeActivePaneItem((async()=>{this.showPanelStateMessages=!!this.delegate.filteredMessages.length,await this.refresh()}))),this.activationTimer=window.requestIdleCallback((async()=>{let e=!0;const t=Mt.getBottomDock();this.subscriptions.add(t.onDidChangeActivePaneItem((t=>{this.panel&&"bottom"===this.getPanelLocation()&&(e?e=!1:t===this.panel!==this.showPanelConfig&&Tt.set("linter-ui-default.showPanel",!this.showPanelConfig))})),t.onDidChangeVisible((e=>{this.panel&&"bottom"===this.getPanelLocation()&&(!e&&this.showPanelConfig&&this.hidePanelWhenEmpty&&!this.showPanelStateMessages||t.getActivePaneItem()===this.panel&&e!==this.showPanelConfig&&Tt.set("linter-ui-default.showPanel",!this.showPanelConfig))}))),Tt.get("linter-ui-default.createPanelOnStart")&&await this.activate(),this.initialized=!0}))}getPanelLocation(){if(!this.panel)return null;const e=Mt.paneContainerForItem(this.panel);return null==e?void 0:e.location}async activate(){this.panel||(this.panel=new Lt(this.delegate),await Mt.open(this.panel,{activatePane:!1,activateItem:!1,searchAllPanes:!0}),await this.update(),await this.refresh())}async update(e=null){e&&(this.messages=e),this.delegate.update(this.messages),this.showPanelStateMessages=!!this.delegate.filteredMessages.length,await this.refresh()}async refresh(){if(!this.initialized)return;const e=this.panel;if(null===e)return void(this.showPanelConfig&&await this.activate());const t=Mt.paneContainerForItem(e);if("bottom"!==(null==t?void 0:t.location))return;const i=t.getActivePaneItem()===e;var s;!this.showPanelConfig||this.hidePanelWhenEmpty&&!this.showPanelStateMessages?i&&t.hide():(i||null===(s=t.paneForItem(e))||void 0===s||s.activateItem(e),t.show(),e.doPanelResize())}dispose(){this.deactivating=!0,this.panel&&this.panel.dispose(),this.subscriptions.dispose(),window.cancelIdleCallback(this.activationTimer)}}const{config:Nt,workspace:Bt,commands:Dt,clipboard:It}=atom;class Ft{constructor(){this.messages=[],this.subscriptions=new Ae,this.subscriptions.add(Dt.add("atom-workspace",{"linter-ui-default:next":()=>this.move(!0,!0),"linter-ui-default:previous":()=>this.move(!1,!0),"linter-ui-default:next-error":()=>this.move(!0,!0,"error"),"linter-ui-default:previous-error":()=>this.move(!1,!0,"error"),"linter-ui-default:next-warning":()=>this.move(!0,!0,"warning"),"linter-ui-default:previous-warning":()=>this.move(!1,!0,"warning"),"linter-ui-default:next-info":()=>this.move(!0,!0,"info"),"linter-ui-default:previous-info":()=>this.move(!1,!0,"info"),"linter-ui-default:next-in-current-file":()=>this.move(!0,!1),"linter-ui-default:previous-in-current-file":()=>this.move(!1,!1),"linter-ui-default:next-error-in-current-file":()=>this.move(!0,!1,"error"),"linter-ui-default:previous-error-in-current-file":()=>this.move(!1,!1,"error"),"linter-ui-default:next-warning-in-current-file":()=>this.move(!0,!1,"warning"),"linter-ui-default:previous-warning-in-current-file":()=>this.move(!1,!1,"warning"),"linter-ui-default:next-info-in-current-file":()=>this.move(!0,!1,"info"),"linter-ui-default:previous-info-in-current-file":()=>this.move(!1,!1,"info"),"linter-ui-default:toggle-panel"(){Nt.set("linter-ui-default.showPanel",!Nt.get("linter-ui-default.showPanel"))},"linter-ui-default:expand-tooltip"(){},"linter-ui-default:collapse-tooltip"(){}}),Dt.add("atom-text-editor:not([mini])",{"linter-ui-default:apply-all-solutions":()=>this.applyAllSolutions()}),Dt.add("#linter-panel",{"core:copy"(){const e=document.getSelection();e&&It.write(""+e)}}))}applyAllSolutions(){const e=Bt.getActiveTextEditor();Fe(void 0!==e,"textEditor was null on a command supposed to run on text-editors only"),u(r(this.messages,e.getPath()),["line","desc"]).forEach((t=>{2===t.version&&Array.isArray(t.solutions)&&t.solutions.length>0&&h(e,d(t.solutions)[0])}))}async move(e,t,n=null){const o=Bt.getActiveTextEditor();var l;const c=null!==(l=null==o?void 0:o.getPath())&&void 0!==l?l:NaN,d=u(r(this.messages,t?null:c,n),["file","asc"]),h=e?-1:1;if(!o){const t=e?d[0]:d[d.length-1];return void(t&&await a(t))}const f=o.getCursorBufferPosition();e||d.reverse();let p=null,g=!1;for(let e=0,t=d.length;t>e;e++){const t=d[e],n=s(t),r=i(t);if(g||n!==c||(g=!0),"string"==typeof n&&r){if(g&&n!==c){p=t;break}if(n===c&&f.compare(r.start)===h){p=t;break}}}!p&&d.length&&(p=d[0]),p&&await a(p)}update(e){this.messages=e}dispose(){this.subscriptions.dispose()}}const{tooltips:Rt}=atom;class Ot{constructor(){this.item=document.createElement("div"),this.itemErrors=ue("stop"),this.itemWarnings=ue("alert"),this.itemInfos=ue("info"),this.emitter=new Be,this.subscriptions=new Ae,this.item.appendChild(this.itemErrors),this.item.appendChild(this.itemWarnings),this.item.appendChild(this.itemInfos),this.item.classList.add("inline-block"),this.item.classList.add("linter-status-count"),this.subscriptions.add(this.emitter,Rt.add(this.itemErrors,{title:"Linter Errors"}),Rt.add(this.itemWarnings,{title:"Linter Warnings"}),Rt.add(this.itemInfos,{title:"Linter Infos"})),this.itemErrors.onclick=()=>this.emitter.emit("click","error"),this.itemWarnings.onclick=()=>this.emitter.emit("click","warning"),this.itemInfos.onclick=()=>this.emitter.emit("click","info"),this.update(0,0,0)}setVisibility(e,t){t?this.item.classList.remove("hide-"+e):this.item.classList.add("hide-"+e)}update(e,t,i){this.itemErrors.childNodes[0].textContent=e+"",this.itemWarnings.childNodes[0].textContent=t+"",this.itemInfos.childNodes[0].textContent=i+"",e?this.itemErrors.classList.add("text-error"):this.itemErrors.classList.remove("text-error"),t?this.itemWarnings.classList.add("text-warning"):this.itemWarnings.classList.remove("text-warning"),i?this.itemInfos.classList.add("text-info"):this.itemInfos.classList.remove("text-info")}onDidClick(e){return this.emitter.on("click",e)}dispose(){this.subscriptions.dispose()}}const{config:$t,workspace:Ht,views:jt,commands:qt}=atom;class Vt{constructor(){this.element=new Ot,this.messages=[],this.subscriptions=new Ae,this.subscriptions.add(this.element,$t.observe("linter-ui-default.statusBarRepresents",(e=>{const t=void 0!==this.statusBarRepresents;this.statusBarRepresents=e,t&&this.update()})),$t.observe("linter-ui-default.statusBarClickBehavior",(e=>{const t=void 0!==this.statusBarClickBehavior;this.statusBarClickBehavior=e,t&&this.update()})),$t.observe("linter-ui-default.showStatusBar",(e=>{this.element.setVisibility("config",e)})),Ht.getCenter().observeActivePaneItem((e=>{const t=Ht.isTextEditor(e);this.element.setVisibility("pane",t),t&&"Current File"===this.statusBarRepresents&&this.update()}))),this.element.onDidClick((async e=>{const t=jt.getView(Ht);if("Toggle Panel"===this.statusBarClickBehavior)await qt.dispatch(t,"linter-ui-default:toggle-panel");else if("Toggle Status Bar Scope"===this.statusBarClickBehavior)$t.set("linter-ui-default.statusBarRepresents","Entire Project"===this.statusBarRepresents?"Current File":"Entire Project");else{const i="Current File"===this.statusBarRepresents?"-in-current-file":"";await qt.dispatch(t,`linter-ui-default:next-${e}${i}`)}}))}update(e){void 0!==e?this.messages=e:e=this.messages;const t={error:0,warning:0,info:0},i=Ht.getActiveTextEditor();var n;const r=null!==(n=null==i?void 0:i.getPath())&&void 0!==n?n:NaN;e.forEach((e=>{"Entire Project"!==this.statusBarRepresents&&s(e)!==r||("error"===e.severity?t.error++:"warning"===e.severity?t.warning++:t.info++)})),this.element.update(t.error,t.warning,t.info)}attach(e){let t=null;this.subscriptions.add($t.observe("linter-ui-default.statusBarPosition",(i=>{t&&t.destroy(),t=e[`add${i}Tile`]({item:this.element.item,priority:"Left"===i?0:1e3})}))),this.subscriptions.add(new De((()=>{t&&t.destroy()})))}dispose(){this.subscriptions.dispose()}}const{config:Wt,project:zt}=atom;class Gt{constructor(){this.executing=new Set,this.providerTitles=new Set,this.useBusySignal=!0,this.subscriptions=new Ae,this.subscriptions.add(Wt.observe("linter-ui-default.useBusySignal",(e=>{this.useBusySignal=e})))}attach(e){this.provider=e.create(),this.update()}update(){const e=this.provider;if(!e)return;if(!this.useBusySignal)return;const t=new Map,i=new Set;for(const{filePath:e,linter:i}of this.executing){let s=t.get(e);s||t.set(e,s=[]),s.push(i.name)}for(const[s,n]of t){const t="string"==typeof s?" on "+zt.relativizePath(s)[1]:"";n.forEach((s=>{const n=`${s}${t}`;i.add(n),this.providerTitles.has(n)||(this.providerTitles.add(n),e.add(n))}))}this.providerTitles.forEach((t=>{i.has(t)||(e.remove(t),this.providerTitles.delete(t))})),t.clear()}getExecuting(e,t){for(const i of this.executing)if(i.linter===e&&i.filePath===t)return i;return null}didBeginLinting(e,t){this.getExecuting(e,t)||(this.executing.add({linter:e,filePath:t}),this.update())}didFinishLinting(e,t){const i=this.getExecuting(e,t);i&&(this.executing.delete(i),this.update())}dispose(){this.provider&&this.provider.clear(),this.providerTitles.clear(),this.executing.clear(),this.subscriptions.dispose()}}class _t{getIntentions({textEditor:e,bufferPosition:t}){let s=[];const n=r(this.messages,e.getPath());for(const r of n){const n=r.solutions,l=Array.isArray(n)&&n.length>0;if(!l&&"function"!=typeof n)continue;const a=i(r);if(!0!==(null==a?void 0:a.containsPoint(t)))continue;const c=r.linterName||"Linter";var o;2===r.version&&l&&(s=s.concat(n.map((t=>({priority:"number"==typeof t.priority?t.priority+200:200,icon:"tools",title:null!==(o=t.title)&&void 0!==o?o:`Fix ${c} issue`,selected(){h(e,t)}})))))}return s}update(e){this.messages=e}constructor(){this.messages=[],this.grammarScopes=["*"]}}const{config:Kt,workspace:Ut,views:Yt,commands:Jt}=atom;class Qt{constructor(){this.emitter=new Be,this.expanded=!1,this.subscriptions=new Ae,this.subscriptions.add(this.emitter,Kt.observe("linter-ui-default.showProviderName",(e=>{const t=void 0!==this.showProviderName;this.showProviderName=e,t&&this.emitter.emit("should-update")})),Jt.add("atom-workspace",{"linter-ui-default:expand-tooltip":e=>{var t;this.expanded||(this.expanded=!0,this.emitter.emit("should-expand"),!0===(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&document.body.addEventListener("keyup",(async function e(){document.body.removeEventListener("keyup",e),await Jt.dispatch(Yt.getView(Ut),"linter-ui-default:collapse-tooltip")}),{passive:!0}))},"linter-ui-default:collapse-tooltip":()=>{this.expanded=!1,this.emitter.emit("should-collapse")}}))}onShouldUpdate(e){return this.emitter.on("should-update",e)}onShouldExpand(e){return this.emitter.on("should-expand",e)}onShouldCollapse(e){return this.emitter.on("should-collapse",e)}dispose(){this.emitter.dispose()}}const Xt=z("<a><span></span></a>",4),Zt=z('<button class="btn fix-btn">Fix</button>',2),ei=z('<a><span class="icon linter-icon icon-alignment-aligned-to"></span></a>',4),ti=z('<a><span class="icon linter-icon icon-link"></span></a>',4),ii=z('<div class="linter-line"></div>',2),si=z('<div class="linter-message"><div><div class="linter-text"><div class="provider-name"></div></div><div class="linter-buttons-right"></div></div></div>',10),{workspace:ni}=atom;let ri;Ve.register("lWcAc",((e,t)=>{e.exports=Promise.resolve(require("./marked.esm.ab6d9469.js")).then((()=>Ve("1o0DF")))})),G(["click"]);var oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.makeOverlaySelectable=(e,t,i=!0)=>{t.setAttribute("tabindex","-1"),t.style.userSelect&&"none"!==t.style.userSelect||(t.style.userSelect="text"),i&&fe(e,t),t.classList.add("native-key-bindings")},oi.overlayFocusFix=fe,oi.focusEditor=pe,oi.blurEditor=ge,oi.makeOverLayCopyable=e=>{e.addEventListener("mouseenter",(()=>{e.addEventListener("keydown",me)})),e.addEventListener("mouseleave",(()=>{e.removeEventListener("keydown",me)}))},oi.copyListener=me;const li=z('<div class="linter-messages"></div>',2);class ai{constructor(e,t,i){this.element=document.createElement("div"),this.emitter=new Be,this.subscriptions=new Ae,this.messages=e,this.marker=i.markBufferRange([t,t]),this.marker.onDidDestroy((()=>this.emitter.emit("did-destroy")));const s=new Qt;var n,r,o;oi.makeOverlaySelectable(i,this.element),this.element.id="linter-tooltip",i.decorateMarker(this.marker,{type:"overlay",item:this.element}),this.subscriptions.add(this.emitter,s),W((()=>H(ve,{messages:e,delegate:s})),this.element),n=this.element,r=t,o=i,setTimeout((()=>{const e=n.getBoundingClientRect().height,t=o.getLineHeightInPixels();if((r.row-o.getFirstVisibleScreenRow())*t>e){const i=n.parentElement;null!==i&&(i.style.transform=`translateY(-${2+t+e}px)`)}else{const e=o.getElement().querySelector(".datatip-overlay");if(null!==e){const t=n.parentElement;null!==t&&(t.style.transform=`translateY(${e.clientHeight}px)`)}}n.style.visibility="visible"}),50)}isValid(e,t){if(1!==this.messages.length||!t.has(this.messages[0].key))return!1;const s=i(this.messages[0]);return!0===(null==s?void 0:s.containsPoint(e))}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose()}}const{config:ci,views:ui}=atom;class di{constructor(e){this.gutter=null,this.tooltip=null,this.emitter=new Be,this.markers=new Map,this.messages=new Map,this.showTooltip=!0,this.subscriptions=new Ae,this.cursorPosition=null,this.tooltipFollows="Both",this.showProviderName=!0,this.ignoreTooltipInvocation=!1,this.currentLineMarker=null,this.lastCursorPositions=new WeakMap,this.textEditor=e;let t=null;this.subscriptions.add(this.emitter,e.onDidDestroy((()=>{this.dispose()})),new De((()=>{null==t||t.dispose()})),ci.observe("linter-ui-default.showProviderName",(e=>{this.showProviderName=e})),ci.observe("linter-ui-default.showDecorations",(e=>{const t=void 0!==this.showDecorations;this.showDecorations=e,t&&this.updateGutter()})),ci.observe("linter-ui-default.gutterPosition",(e=>{const t=void 0!==this.gutterPosition;this.gutterPosition=e,t&&this.updateGutter()})),ci.observe("linter-ui-default.showTooltip",(e=>{this.showTooltip=e,e||null===this.tooltip||this.removeTooltip()})),ci.observe("linter-ui-default.tooltipFollows",(e=>{this.tooltipFollows=e,null==t||t.dispose(),t=new Ae,"Mouse"!==e&&"Both"!==e||t.add(this.listenForMouseMovement()),"Keyboard"!==e&&"Both"!==e||t.add(this.listenForKeyboardMovement()),this.removeTooltip()})),e.onDidChangeCursorPosition((({cursor:e,newBufferPosition:t})=>{const i=this.lastCursorPositions.get(e);void 0!==i&&i.isEqual(t)||(this.lastCursorPositions.set(e,t),this.ignoreTooltipInvocation=!1),"Mouse"===this.tooltipFollows&&this.removeTooltip()})),e.getBuffer().onDidChangeText((()=>{const t=e.getCursors();for(const e of t)this.lastCursorPositions.set(e,e.getBufferPosition());"Mouse"!==this.tooltipFollows&&(this.ignoreTooltipInvocation=!0,this.removeTooltip())}))),this.updateGutter(),this.listenForCurrentLine()}listenForCurrentLine(){this.subscriptions.add(this.textEditor.observeCursors((e=>{const t=({start:e,end:t})=>{var i;const s=this.gutter;if(null===s||this.subscriptions.disposed)return;const n=Ne.fromObject([e,t]),r=Ne.fromObject([[e.row,0],[t.row,1/0]]),o=n.isEmpty();if(e.row!==t.row&&0===n.end.column&&r.end.row--,!0===(null===(i=this.lastRange)||void 0===i?void 0:i.isEqual(r))&&o===this.lastIsEmpty)return;this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null),this.lastRange=r,this.lastIsEmpty=o,this.currentLineMarker=this.textEditor.markScreenRange(r,{invalidate:"never"});const l=document.createElement("span");l.className="line-number cursor-line linter-cursor-line "+(o?"cursor-line-no-selection":""),s.decorateMarker(this.currentLineMarker,{item:l,class:"linter-row"})},i=e.getMarker(),s=new Ae;s.add(i.onDidChange((({newHeadScreenPosition:e,newTailScreenPosition:i})=>{t({start:e,end:i})})),e.onDidDestroy((()=>{this.subscriptions.remove(s),s.dispose()})),new De((()=>{this.currentLineMarker&&(this.currentLineMarker.destroy(),this.currentLineMarker=null)}))),this.subscriptions.add(s),t(i.getScreenRange())})))}listenForMouseMovement(){const e=ui.getView(this.textEditor);return Re(e,"mousemove",p((t=>{if(this.subscriptions.disposed||!((e,t)=>{let i=e;if(null===i)return!1;do{if(i.matches("div.scroll-view"))return!0;i=i.parentElement}while(null!==i&&"HTML"!==i.nodeName);return!1})(t.target))return;const i=this.tooltip;null!==i&&(({event:e,editor:t,editorElement:i,tooltipElement:s,screenPosition:n})=>{const r=i.getComponent().pixelPositionForMouseEvent(e),o=i.pixelPositionForScreenPosition(n),l=r.top-o.top,a=r.left-o.left,c=t.getLineHeightInPixels();return!(l>0&&l>s.offsetHeight+c+1.5*c||0>l&&-1.5*c>l||a>0&&a>s.offsetWidth+30||0>l&&-30>a)})({event:t,editor:this.textEditor,editorElement:e,tooltipElement:i.element,screenPosition:i.marker.getStartScreenPosition()})||(this.cursorPosition=((e,t,i)=>{const s=i.getComponent(),n=s.pixelPositionForMouseEvent(e),r=s.screenPositionForPixelPosition(n);if(Number.isNaN(r.row)||Number.isNaN(r.column))return null;const o=i.pixelPositionForScreenPosition(r),l=n.top-o.top,a=n.left-o.left;return(0===l||l>0&&20>l||0>l&&l>-20)&&(0===a||a>0&&20>a||0>a&&a>-20)?t.bufferPositionForScreenPosition(r):null})(t,this.textEditor,e),this.ignoreTooltipInvocation=!1,this.cursorPosition?this.updateTooltip(this.cursorPosition):this.removeTooltip())}),100),{passive:!0})}listenForKeyboardMovement(){return this.textEditor.onDidChangeCursorPosition(p((({newBufferPosition:e})=>{this.cursorPosition=e,this.updateTooltip(e)}),16))}updateGutter(){if(this.removeGutter(),!0===this.showDecorations){this.gutter=this.textEditor.addGutter({name:"linter-ui-default",priority:"Left"===this.gutterPosition?-100:100});for(const[e,t]of this.markers){const i=this.messages.get(e);if(i)for(const e of t)this.decorateMarker(i,e,"gutter")}}else this.gutter=null}removeGutter(){if(this.gutter)try{this.gutter.destroy()}catch(e){}}updateTooltip(e){var t;if(!e||!0===(null===(t=this.tooltip)||void 0===t?void 0:t.isValid(e,this.messages)))return;if(this.removeTooltip(),!this.showTooltip)return;if(this.ignoreTooltipInvocation)return;const i=o(this.messages,this.textEditor.getPath(),e);if(0===i.length)return;this.tooltip=new ai(i,e,this.textEditor);const s=this.tooltip.marker;for(const e of i)this.saveMarker(e.key,s);this.tooltip.onDidDestroy((()=>{this.tooltip=null}))}removeTooltip(){var e;null===(e=this.tooltip)||void 0===e||e.marker.destroy()}applyChanges(e,t){const s=this.textEditor.getBuffer();for(let e=0,i=t.length;i>e;e++)this.destroyMarker(t[e].key);for(let t=0,n=e.length;n>t;t++){const n=e[t],r=i(n);if(!r)continue;const o=s.markRange(r,{invalidate:"never"});this.decorateMarker(n,o),o.onDidChange((({oldHeadPosition:e,newHeadPosition:t,isValid:i})=>{!i||0===t.row&&0!==e.row||2===n.version&&(n.location.position=o.previousEventState.range)}))}this.updateTooltip(this.cursorPosition)}decorateMarker(e,t,i="both"){this.saveMarker(e.key,t),this.messages.set(e.key,e),"both"!==i&&"editor"!==i||this.textEditor.decorateMarker(t,{type:"text",class:"linter-highlight linter-"+e.severity});const s=this.gutter;if(s&&("both"===i||"gutter"===i)){const i=document.createElement("span");var n;i.className=`linter-gutter linter-gutter-${e.severity} icon icon-${null!==(n=e.icon)&&void 0!==n?n:"primitive-dot"}`,s.decorateMarker(t,{class:"linter-row",item:i})}}saveMarker(e,t){var i;const s=null!==(i=this.markers.get(e))&&void 0!==i?i:[];s.push(t),this.markers.set(e,s)}destroyMarker(e){const t=this.markers.get(e);if(t)for(const e of t)null==e||e.destroy();this.markers.delete(e),this.messages.delete(e)}onDidDestroy(e){return this.emitter.on("did-destroy",e)}dispose(){this.emitter.emit("did-destroy"),this.subscriptions.dispose(),this.removeGutter(),this.removeTooltip()}}var hi={};Object.defineProperty(hi,"__esModule",{value:!0}),hi.lineLengthIfLong=hi.lineCountIfLarge=hi.largeness=void 0,hi.largeness=(e,t=atom.config.get("atom-ide-base.largeLineCount")||4e3,i=atom.config.get("atom-ide-base.longLineLength")||4e3)=>{const s=we(e,t);if(0!==s)return s;const n=ye(e,i);return 0!==n?n:0},hi.lineCountIfLarge=we,hi.lineLengthIfLong=ye;const{config:fi,workspace:pi,notifications:gi}=atom;class mi{constructor(){this.editors=new Set,this.messages=[],this.firstRender=!0,this.subscriptions=new Ae;const e=fi.get("linter-ui-default.largeFileLineCount"),t=fi.get("linter-ui-default.longLineLength");this.subscriptions.add(pi.observeTextEditors((i=>{if(hi.largeness(i,e,t)){const e=gi.addWarning("Linter: Large/Minified file detected",{detail:"Adding inline linter markers are skipped for this file for performance reasons (linter pane is still active)",dismissable:!0,buttons:[{text:"Force enable",onDidClick:()=>{this.getEditor(i),e.dismiss()}},{text:"Change threshold",async onDidClick(){await pi.open("atom://config/packages/linter-ui-default"),document.querySelectorAll(".control-group")[16].scrollIntoView(),e.dismiss()}}]});setTimeout((()=>{e.dismiss()}),5e3)}else this.getEditor(i)})),pi.getCenter().observeActivePaneItem((e=>{this.editors.forEach((t=>{t.textEditor!==e&&t.removeTooltip()}))})))}isFirstRender(){return this.firstRender}update({messages:e,added:t,removed:i}){this.messages=e,this.firstRender=!1;const{editorsMap:n,filePaths:r}=(e=>{const t=new Map,i=[];for(const n of e.editors){var s;const e=null!==(s=n.textEditor.getPath())&&void 0!==s?s:"";t.has(e)?t.get(e).editors.push(n):(t.set(e,{added:[],removed:[],editors:[n]}),i.push(e))}return{editorsMap:t,filePaths:i}})(this);t.forEach((e=>{if(!e||!e.location)return;const t=s(e);"string"==typeof t&&n.has(t)&&n.get(t).added.push(e)})),i.forEach((e=>{if(!e||!e.location)return;const t=s(e);"string"==typeof t&&n.has(t)&&n.get(t).removed.push(e)})),r.forEach((e=>{if(n.has(e)){const{added:t,removed:i,editors:s}=n.get(e);(t.length||i.length)&&s.forEach((e=>e.applyChanges(t,i)))}}))}getEditor(e){for(const t of this.editors)if(t.textEditor===e)return t;const t=new di(e);return this.editors.add(t),t.onDidDestroy((()=>{this.editors.delete(t)})),t.subscriptions.add(e.onDidChangePath((()=>{t.dispose(),this.getEditor(e)}))),t.subscriptions.add(e.onDidChangeGrammar((()=>{t.dispose(),this.getEditor(e)}))),t.applyChanges(r(this.messages,e.getPath()),[]),t}dispose(){for(const e of this.editors)e.dispose();this.subscriptions.dispose()}}const{project:vi}=atom,{config:wi}=atom;class yi{constructor(){this.messages=[],this.decorations={},this.subscriptions=new Ae,this.subscriptions.add(wi.observe("linter-ui-default.decorateOnTreeView",(e=>{if(void 0===this.decorateOnTreeView)this.decorateOnTreeView=e;else if("None"===e)this.update([]),this.decorateOnTreeView=e;else{const t=this.messages;this.decorateOnTreeView=e,this.update(t)}}))),setTimeout((()=>{const e=yi.getElement();e&&this.subscriptions.add(Re(e,"click",p((()=>{this.update()})),{passive:!0}))}),100)}update(e=null){Array.isArray(e)&&(this.messages=e);const t=this.messages,i=yi.getElement(),n=this.decorateOnTreeView;i&&"None"!==n&&this.applyDecorations(((e,t)=>{const i={},n=vi.getPaths();return t.forEach((t=>{const r=s(t);"string"==typeof r&&("Files"===e?[r]:((e,t)=>{const i=t.find((t=>e.startsWith(t)));return void 0===i?[e]:((e,t)=>{const i=[],s=e.split($e.sep);for(;s.length;){const e=s.join($e.sep);if(e&&(i.push(e),e===t))break;s.pop()}return i})(e,i)})(r,n)).forEach((e=>((e,t,i)=>{void 0===e[t]&&(e[t]={info:!1,error:!1,warning:!1}),e[t][i]=!0})(i,e,t.severity)))})),i})(n,t))}applyDecorations(e){const t=yi.getElement();if(!t)return;const i=new Map,s={},n=Object.keys(this.decorations);for(const s of n)if(!(s in e)){const e=f(i,s,(()=>yi.getElementByPath(t,s)));null!==e&&ke(e)}const r=Object.keys(e);for(const n of r){const r=f(i,n,(()=>yi.getElementByPath(t,n)));if(null!==r){const t=e[n];be(r,t,!!this.decorations[n]),s[n]=t}}this.decorations=s}dispose(){this.subscriptions.dispose()}static getElement(){return document.querySelector(".tree-view")}static getElementByPath(e,t){return e.querySelector(`[data-path=${CSS.escape(t)}]`)}}const{config:bi}=atom;class ki{constructor(){this.name="Linter",this.signal=new Gt,this.commands=new Ft,this.messages=[],this.statusBar=new Vt,this.intentions=new _t,this.subscriptions=new Ae,this.idleCallbacks=new Set,this.subscriptions.add(this.signal,this.commands,this.statusBar);const e=window.requestIdleCallback((async()=>{this.idleCallbacks.delete(e),this.panel=new At,await this.panel.update(this.messages)}));this.idleCallbacks.add(e);const t=window.requestIdleCallback((()=>{this.idleCallbacks.delete(t),this.subscriptions.add(bi.observe("linter-ui-default.showDecorations",(e=>{e&&!this.editors?(this.editors=new mi,this.editors.update({added:this.messages,removed:[],messages:this.messages})):!e&&this.editors&&(this.editors.dispose(),this.editors=null)})))}));this.idleCallbacks.add(t)}async render(e){const t=this.editors;this.messages=e.messages,t&&(t.isFirstRender()?t.update({added:e.messages,removed:[],messages:e.messages}):t.update(e)),this.treeview||(this.treeview=new yi,this.subscriptions.add(this.treeview)),this.treeview.update(e.messages),this.panel&&await this.panel.update(e.messages),this.commands.update(e.messages),this.intentions.update(e.messages),this.statusBar.update(e.messages)}didBeginLinting(e,t){this.signal.didBeginLinting(e,t)}didFinishLinting(e,t){this.signal.didFinishLinting(e,t)}dispose(){this.idleCallbacks.forEach((e=>window.cancelIdleCallback(e))),this.idleCallbacks.clear(),this.subscriptions.dispose(),this.panel&&this.panel.dispose(),this.editors&&this.editors.dispose()}}const{config:Pi,packages:xi}=atom,Ci=new Set,Ei=new Set;let Si,Li;
//# sourceMappingURL=index.js.map
